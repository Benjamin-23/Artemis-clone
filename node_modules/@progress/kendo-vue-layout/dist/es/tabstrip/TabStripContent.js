// @ts-ignore
import * as Vue from 'vue';
var allVue = Vue;
var gh = allVue.h;
var ref = allVue.ref;
var inject = allVue.inject;
import { Fade } from '@progress/kendo-vue-animation';
import { classNames, guid, getDefaultSlots, getTemplate } from '@progress/kendo-vue-common';
import { getTabs } from './utils';
/**
 * @hidden
 */

var TabStripContentVue2 = {
  name: 'KendoTabStripContent',
  props: {
    showAll: Boolean,
    animation: Boolean,
    tabs: Array,
    selected: Number,
    hasTabs: Boolean
  },
  created: function created() {
    this.contentId = guid();
  },
  // @ts-ignore
  setup: !gh ? undefined : function () {
    var v3 = !!gh;
    return {
      v3: v3
    };
  },
  data: function data() {
    return {
      midAnimation: false
    };
  },
  computed: {
    animationClass: function animationClass() {
      var that = this;
      return this.tabs.map(function (_t, idx) {
        var visible = idx === that.$props.selected;
        return {
          'k-fade-appear': that.animation && !visible,
          'k-fade-enter-active': that.animation && visible
        };
      });
    }
  },
  render: function render(createElement) {
    var h = gh || createElement;
    var _a = this.$props,
        tabs = _a.tabs,
        selected = _a.selected,
        showAll = _a.showAll,
        hasTabs = _a.hasTabs;
    var selectedTab = tabs && typeof selected === 'number' && tabs[selected];
    var defaultSlots = getDefaultSlots(this);
    var innerTabs = hasTabs ? tabs : getTabs.call(this, [], defaultSlots || []);
    var tabStyles = selected < innerTabs.length && selected > -1;
    var contentClasses = classNames({
      'k-content': tabStyles
    }, {
      'k-state-active': tabStyles
    }, selectedTab && selectedTab.contentClassName);

    var renderChild = function renderChild(tab, idx) {
      var _this = this;

      var visible = idx === this.$props.selected;
      var animationStyle = {
        position: 'initial',
        height: visible ? undefined : '0px',
        width: visible ? undefined : '0px'
      };
      var content = hasTabs ? getTemplate.call(this, {
        h: h,
        template: tab.content,
        defaultRendering: null
      }) : tab;
      return (// @ts-ignore function children
        h(Fade, {
          appear: this.v3 ? true : visible,
          attrs: this.v3 ? undefined : {
            appear: this.v3 ? true : visible,
            enter: this.$props.animation,
            exit: this.$props.keepTabsMounted
          },
          key: idx,
          "class": this.animationClass[idx],
          enter: this.$props.animation,
          exit: this.$props.keepTabsMounted,
          style: animationStyle
        }, this.v3 ? function () {
          return [h("div", {
            role: 'tabpanel',
            attrs: _this.v3 ? undefined : {
              role: 'tabpanel',
              "aria-expanded": true,
              id: String(_this.contentId + idx)
            },
            "aria-expanded": true,
            id: String(_this.contentId + idx),
            key: idx
          }, [//  hasTabs ? 
          //     visible ? content : null
          //     : 
          content])];
        } : [h("div", {
          role: 'tabpanel',
          attrs: _this.v3 ? undefined : {
            role: 'tabpanel',
            "aria-expanded": true,
            id: String(_this.contentId + idx)
          },
          "aria-expanded": true,
          id: String(_this.contentId + idx),
          key: idx
        }, [content])])
      );
    };

    var renderContent = function renderContent() {
      return innerTabs.map(function (tab, idx) {
        return renderChild.call(this, tab, idx);
      }, this);
    };

    return h("div", {
      "class": contentClasses,
      style: this.$props.style
    }, [renderContent.call(this)]);
  }
};
/**
 * @hidden
 */

var TabStripContent = TabStripContentVue2;
export { TabStripContent, TabStripContentVue2 };